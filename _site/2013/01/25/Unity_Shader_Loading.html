<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Unity Shader Loading</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Jarrah Technology">
    <meta name="referrer" content="no-referrer">

    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://www.jarrahtechnology.com/atom.xml" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.jarrahtechnology.com/rss.xml" />

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/css/pygments/default.css" rel="stylesheet">
    <link href="/assets/css/jt.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 40px;
        padding-bottom: 40px;
      }
      .hero-unit {
        background-color: #9c0000;
        border-bottom-right-radius: 0px;
        border-bottom-left-radius: 0px;
        padding: 0px;
        margin-bottom: 0px;
      }
      .navbar {
        margin-bottom: 10px;
      }
      .navbar-inner {
        min-height: 40px;
        padding-right: 20px;
        padding-left: 20px;
        border-top-right-radius: 0px;
        border-top-left-radius: 0px;
      }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>    
    <div class="container">
      <div class="hero-unit">
        <a href="/"><img src="/assets/img/logo.png" alt="Jarrah Technology logo"/></a>
      </div>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
            <ul class="nav pull-right">
              <li class=""><a href="/">Home</a></li>
              <li><a href="/press">Press</a></li>
              <li class=""><a href="/news">News</a></li>
              <li class=""><a href="/games">Games</a></li>
              <li class=""><a href="/contact.html">Contact</a></li>
            </ul>
        </div>
      </div>
    </div>

<div class="row">
<div class="span12">
<h4>January 25, 2013</h4>
<h4>Category: News</h4>
<h4>Author: Charles</h4>
<h2>Unity Shader Loading
<a href="https://twitter.com/intent/tweet?text=%20%40JarrahTech%20http://www.jarrahtechnology.com" target="_blank"><img alt="Twitter" src="/assets/img/twitter.png"/></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=//www.jarrahtechnology.com" target="_blank"><img alt="Facebook" src="/assets/img/facebook.png"/></a>
<a href="http://plus.google.com/share?url=http://www.jarrahtechnology.com" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><img src="/assets/img/gplus.png" alt="Share on Google+"/></a>
</h2>
      <p>After working mainly inside the <a href="http://unity3d.com/">Unity3D</a>
environment for the last couple of months, I decided to create a
standalone build. It didn’t work! Some mouse clicks did not seem to be
detected, while others produced the expected results. I went back to
Unity3D and everything worked fine there. Unity and it’s standalone
build must work in slightly different ways. Luckily the standalone build
produces an <code>output\_log.txt</code> in the project’s
<code>\_Data</code> directory. Normally this contains very little, but
in my broken build the following lines were repeated.</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">NullReferenceException</span>
  <span class="nf">at</span> <span class="p">(</span><span class="n">wrapper</span> <span class="n">managed</span><span class="p">-</span><span class="n">to</span><span class="p">-</span><span class="n">native</span><span class="p">)</span> <span class="n">UnityEngine</span><span class="p">.</span><span class="n">Material</span><span class="p">:</span><span class="nf">Internal_CreateWithShader</span> <span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Material</span><span class="p">,</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Shader</span><span class="p">)</span> 
  <span class="n">at</span> <span class="n">UnityEngine</span><span class="p">.</span><span class="n">Material</span><span class="p">..</span><span class="nf">ctor</span> <span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Shader</span> <span class="n">shader</span><span class="p">)</span> <span class="p">[</span><span class="m">0x00000</span><span class="p">]</span> <span class="k">in</span> <span class="p">&lt;</span><span class="n">filename</span> <span class="n">unknown</span><span class="p">&gt;:</span><span class="m">0</span>  
  <span class="n">at</span> <span class="n">VectorLineUtil</span><span class="p">.</span><span class="nf">GetLineMaterial</span> <span class="p">()</span> <span class="p">[</span><span class="m">0x00000</span><span class="p">]</span> <span class="k">in</span> <span class="p">&lt;</span><span class="n">filename</span> <span class="n">unknown</span><span class="p">&gt;:</span><span class="m">0</span>  
  <span class="n">at</span> <span class="n">TargetPlanner</span><span class="p">..</span><span class="nf">cctor</span> <span class="p">()</span> <span class="p">[</span><span class="m">0x00000</span><span class="p">]</span> <span class="k">in</span> <span class="p">&lt;</span><span class="n">filename</span> <span class="n">unknown</span><span class="p">&gt;:</span><span class="m">0</span> 
<span class="n">Rethrow</span> <span class="k">as</span> <span class="n">TypeInitializationException</span><span class="p">:</span> <span class="n">An</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">thrown</span> <span class="k">by</span> <span class="n">the</span> <span class="n">type</span> <span class="n">initializer</span> <span class="k">for</span> <span class="n">TargetPlanner</span></code></pre></figure>

<p>Thus the problem is because the standalone can’t find the Shader
specified in a <code>Shader.Find()</code> call. According to the
<a href="http://docs.unity3d.com/Documentation/ScriptReference/Shader.Find.html">documentation for the API
call</a>,
shaders are only included in the build if they are used in a material or
in the <code>Resources</code> directory. The shader causing the error
was installed in the <code>Plugins</code> folder (as it was part of a
plugin bought from the Unity Asset Store).</p>

<p>Just moving all the shaders into the <code>Resources</code> directory
fixed the issue. A handy tip to remember when structuring your Unity3D
project.</p>

<p><strong>Comments:</strong>
<em>I have removed the commenting system (for privacy concerns), below are the comments that were left on this post before doing so…</em></p>

<p><em>test @ 2013-03-29</em> - thank you!</p>

<p><em>MF @ 2013-07-02</em> - We had just spent at least 30 minutes trying to figure this out.  Thanks a ton!</p>

<p><em>Максим Таран @ 2015-06-11</em> - Edit-&gt;Project settings-&gt;Graphics-&gt; ..add you custom shader</p>

<p><em>Александр Корчуганов @ 2016-05-04</em> - Thank you very much, dude!</p>

<p><em>Kleber Lopes da Silva @ 2016-06-16</em> - Thanks for that!</p>

<p><em>Alessandro @ 2017-09-28</em> - I was going crazy, thanks!</p>

</div>
</div>

<div class="row">
<div class="span12">
Tags: 
    
      <a class="post" href="/blog/tag/Unity.html">Unity</a>
    
</div>
</div>
  

<hr>

      <footer>
        <p>&copy; Jarrah Technology 2013-2022</p>
      </footer>

     </div><!-- /container -->

  </body>
</html>
